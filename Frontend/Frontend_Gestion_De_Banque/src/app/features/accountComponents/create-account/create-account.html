<div class="min-h-screen bg-gray-50 py-8">
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
    
    <!-- Header -->
    <div class="flex items-center justify-between mb-8">
      <div class="flex items-center space-x-4">
        <button 
          [routerLink]="clientId ? ['/accounts', clientId] : '/accounts'"
          class="flex items-center px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors duration-200"
        >
          <i class="fas fa-arrow-left mr-2"></i>
          Retour
        </button>
        <div>
          <h1 class="text-3xl font-bold text-gray-900">Nouveau Compte</h1>
          <p class="text-gray-600 mt-1">Créez un nouveau compte bancaire</p>
        </div>
      </div>
    </div>

    <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
      
      <!-- Partie Gauche - Formulaire -->
      <div class="lg:col-span-2">
        <div class="bg-white rounded-2xl shadow-sm border border-gray-200 p-6">
          <h2 class="text-xl font-semibold text-gray-900 mb-6 flex items-center">
            <div class="w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center mr-3">
              <i class="fas fa-edit text-blue-600 text-sm"></i>
            </div>
            Informations du compte
          </h2>

          <form [formGroup]="accountForm" (ngSubmit)="onSubmit()">
            <div class="space-y-6">
              
              <!-- Type de compte -->
              <div>
                <label class="block text-sm font-medium text-gray-700 mb-2">
                  Type de compte <span class="text-red-500">*</span>
                </label>
                <div class="grid grid-cols-2 gap-4">
                  <button 
                    type="button"
                    (click)="setAccountType('courant')"
                    [class]="accountType === 'courant' ? 
                      'bg-blue-600 text-white border-2 border-blue-600' : 
                      'bg-white text-gray-700 border-2 border-gray-300 hover:border-blue-500'"
                    class="p-4 rounded-xl font-semibold transition-all duration-200 flex items-center justify-center"
                  >
                    <i class="fas fa-wallet mr-3"></i>
                    Compte Courant
                  </button>
                  <button 
                    type="button"
                    (click)="setAccountType('epargne')"
                    [class]="accountType === 'epargne' ? 
                      'bg-green-600 text-white border-2 border-green-600' : 
                      'bg-white text-gray-700 border-2 border-gray-300 hover:border-green-500'"
                    class="p-4 rounded-xl font-semibold transition-all duration-200 flex items-center justify-center"
                  >
                    <i class="fas fa-piggy-bank mr-3"></i>
                    Compte Épargne
                  </button>
                </div>
              </div>

              <!-- Sélection du client (seulement si pas de clientId) -->
              <div *ngIf="!clientId">
  <label class="block text-sm font-medium text-gray-700 mb-2">
    Client propriétaire <span class="text-red-500">*</span>
  </label>
  <select 
    formControlName="clientId"
    class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors duration-200 bg-white"
    [class]="{
      'border-red-300': accountForm.get('clientId')?.invalid && accountForm.get('clientId')?.touched,
      'border-green-300': accountForm.get('clientId')?.valid && accountForm.get('clientId')?.touched
    }"
  >
    <option value="" class="text-gray-400">-- Choisissez un client --</option>
    <option *ngFor="let client of clients" [value]="client.id" class="text-gray-700">
      [{{ client.id }}] {{ client.firstName }} {{ client.lastName }} - {{ client.email }}
    </option>
  </select>
  <div class="flex justify-between mt-1">
    <div *ngIf="accountForm.get('clientId')?.invalid && accountForm.get('clientId')?.touched" 
         class="text-red-500 text-sm">
      Le client est requis
    </div>
    <div class="text-gray-500 text-sm">
      {{ clients.length }} client(s) disponible(s)
    </div>
  </div>
</div>

              <!-- Découvert (seulement pour compte courant) -->
              <div *ngIf="accountType === 'courant'">
                <label class="block text-sm font-medium text-gray-700 mb-2">
                  Découvert autorisé
                </label>
                <input 
                  type="number"
                  formControlName="overdraft"
                  class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors duration-200"
                  placeholder="0.00"
                  step="0.01"
                  min="0"
                >
                <p class="text-gray-500 text-sm mt-1">
                  Montant maximum autorisé pour les découverts
                </p>
              </div>

              <!-- Taux d'intérêt (seulement pour compte épargne) -->
              <div *ngIf="accountType === 'epargne'">
                <label class="block text-sm font-medium text-gray-700 mb-2">
                  Taux d'intérêt (%)
                </label>
                <input 
                  type="number"
                  formControlName="interestRate"
                  class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-colors duration-200"
                  placeholder="2.5"
                  step="0.1"
                  min="0"
                  max="10"
                >
                <p class="text-gray-500 text-sm mt-1">
                  Taux d'intérêt annuel appliqué au compte
                </p>
              </div>

              <!-- Solde initial -->
              <div>
                <label class="block text-sm font-medium text-gray-700 mb-2">
                  Solde initial
                </label>
                <input 
                  type="number"
                  formControlName="balance"
                  class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors duration-200"
                  placeholder="0.00"
                  step="0.01"
                  min="0"
                >
              </div>

              <!-- Devise -->
              <div>
                <label class="block text-sm font-medium text-gray-700 mb-2">
                  Devise <span class="text-red-500">*</span>
                </label>
                <select 
                  formControlName="currency"
                  class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors duration-200"
                >
                  <option value="EUR">Euro (EUR)</option>
                  <option value="USD">Dollar US (USD)</option>
                  <option value="CFA">Franc CFA (CFA)</option>
                  <option value="GBP">Livre Sterling (GBP)</option>
                </select>
              </div>

              <!-- Boutons -->
              <div class="flex space-x-4 pt-4">
                <button
                  type="button"
                  [routerLink]="clientId ? ['/comptes', clientId] : '/comptes'"
                  class="flex-1 bg-gray-100 hover:bg-gray-200 text-gray-700 py-3 px-6 rounded-lg font-semibold transition-colors duration-200 flex items-center justify-center"
                >
                  <i class="fas fa-times mr-2"></i>
                  Annuler
                </button>
                <button
                  type="submit"
                  [disabled]="accountForm.invalid || isLoading"
                  class="flex-1 bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white py-3 px-6 rounded-lg font-semibold transition-colors duration-200 flex items-center justify-center"
                >
                  <i class="fas fa-save mr-2" [class.hidden]="isLoading"></i>
                  <i class="fas fa-spinner fa-spin mr-2" [class.hidden]="!isLoading"></i>
                  {{ isLoading ? 'Création...' : 'Créer le compte' }}
                </button>
              </div>

            </div>
          </form>
        </div>
      </div>

      <!-- Partie Droite -->
      <div class="space-y-6">
        
        <!-- Informations du client -->
        <div class="bg-white rounded-2xl shadow-sm border border-gray-200 p-6">
          <h2 class="text-xl font-semibold text-gray-900 mb-4 flex items-center">
            <div class="w-8 h-8 bg-emerald-100 rounded-lg flex items-center justify-center mr-3">
              <i class="fas fa-user text-emerald-600 text-sm"></i>
            </div>
            Client propriétaire
          </h2>

          <div *ngIf="selectedClient" class="space-y-4">
            <div class="flex items-center space-x-3">
              <div class="w-12 h-12 bg-emerald-100 rounded-xl flex items-center justify-center">
                <span class="text-emerald-700 font-bold">
                  {{ selectedClient.firstName.charAt(0) }}{{ selectedClient.lastName.charAt(0) }}
                </span>
              </div>
              <div>
                <h3 class="font-semibold text-gray-900">{{ selectedClient.firstName }} {{ selectedClient.lastName }}</h3>
                <p class="text-emerald-600 text-sm">Client</p>
              </div>
            </div>

            <div class="space-y-2 text-sm">
              <div class="flex items-center space-x-2">
                <i class="fas fa-envelope text-gray-400 w-4"></i>
                <span class="text-gray-600">{{ selectedClient.email }}</span>
              </div>
              <div class="flex items-center space-x-2">
                <i class="fas fa-phone text-gray-400 w-4"></i>
                <span class="text-gray-600">{{ selectedClient.phoneNumbers }}</span>
              </div>
            </div>
          </div>

          <div *ngIf="!selectedClient" class="text-center py-4 text-gray-500">
            <i class="fas fa-user-slash text-2xl mb-2"></i>
            <p>Aucun client sélectionné</p>
          </div>
        </div>

        <!-- Aperçu du compte -->
        <div class="bg-white rounded-2xl shadow-sm border border-gray-200 p-6">
          <h2 class="text-xl font-semibold text-gray-900 mb-4 flex items-center">
            <div class="w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center mr-3">
              <i class="fas fa-eye text-blue-600 text-sm"></i>
            </div>
            Aperçu du compte
          </h2>

          <div class="space-y-3 text-sm">
            <div class="flex justify-between">
              <span class="text-gray-500">Type:</span>
              <span class="font-semibold" [class]="accountType === 'courant' ? 'text-blue-600' : 'text-green-600'">
                {{ accountType === 'courant' ? 'Compte Courant' : 'Compte Épargne' }}
              </span>
            </div>
            <div class="flex justify-between">
              <span class="text-gray-500">Solde initial:</span>
              <span class="font-semibold">{{ accountForm.get('balance')?.value || 0 | number:'1.2-2' }} {{ accountForm.get('currency')?.value }}</span>
            </div>
            <div class="flex justify-between" *ngIf="accountType === 'courant'">
              <span class="text-gray-500">Découvert:</span>
              <span class="font-semibold">{{ accountForm.get('overdraft')?.value || 0 | number:'1.2-2' }} {{ accountForm.get('currency')?.value }}</span>
            </div>
            <div class="flex justify-between" *ngIf="accountType === 'epargne'">
              <span class="text-gray-500">Taux d'intérêt:</span>
              <span class="font-semibold">{{ accountForm.get('interestRate')?.value || 0 }}%</span>
            </div>
            <div class="flex justify-between">
              <span class="text-gray-500">Devise:</span>
              <span class="font-semibold">{{ accountForm.get('currency')?.value }}</span>
            </div>
          </div>

          <!-- Indicateur de validation -->
          <div class="mt-6 p-4 rounded-lg" [class]="accountForm.valid ? 'bg-green-50 border border-green-200' : 'bg-yellow-50 border border-yellow-200'">
            <div class="flex items-center space-x-3">
              <i [class]="accountForm.valid ? 'fas fa-check-circle text-green-500' : 'fas fa-exclamation-triangle text-yellow-500'"></i>
              <div>
                <p class="text-sm font-medium" [class]="accountForm.valid ? 'text-green-800' : 'text-yellow-800'">
                  {{ accountForm.valid ? 'Formulaire valide' : 'Formulaire incomplet' }}
                </p>
                <p class="text-xs" [class]="accountForm.valid ? 'text-green-600' : 'text-yellow-600'">
                  {{ accountForm.valid ? 'Prêt à créer le compte' : 'Remplissez tous les champs obligatoires' }}
                </p>
              </div>
            </div>
          </div>
        </div>

      </div>

    </div>
  </div>
</div>